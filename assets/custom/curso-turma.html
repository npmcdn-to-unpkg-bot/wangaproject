<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="turma-card.html">
<!-- aqui deve se mostrar as turmas disponiveis pra um curso e checkar se o usuario esta participando de alguma indicar-->

<dom-module id="curso-turma">
    <template>
        
        <iron-ajax 
                   id="turmaAjax"
                   method="get"
                   contentType="application/json"
                   auto
                   on-response="showTurmas"
                   last-response="{{turmas}}"
                   handle-as="json"
                   >
        </iron-ajax>
        

        <h1>Turmas</h1>
        <div class="layout horizontal ">
           
        <template is="dom-repeat" items="{{turmas}}" as="turma">
            <div style="width: auto;">
                <turma-card turma={{turma}}></turma-card>
            </div>
        </template> 
        </div>
        
        
    </template>
</dom-module>

<script>
    Polymer({
        is:'curso-turma',
        
        ready:function(){
          //console.log(this.cursoname);
          //console.log(this.id);
          console.log(this.turmas);
          this.$.turmaAjax.url = "/api/turmas/"+this.id;
        },
        showTurmas:function(r){
            console.log(r.detail.response);
        },
        
        properties:{
            cursoid:{
                type:String,
                value:"",
                notify:true,
                reflectToAttribute: true
            },
            id:{
                type:String,
                value:"",
                notify:true,
                reflectToAttribute: true
            }
        }
        
        });
    
</script>